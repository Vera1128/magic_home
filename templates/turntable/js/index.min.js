"use strict";var URL="http://172.104.74.252:6543/",vue=new Vue({el:"#content",data:{addTransition:!1,oPointer:null,oTurntable:null,cat:51.4,num:0,offOn:!0,rdm:0,transformNum:0,left_times:0,name:"",showMask:!0,showHeadTips:!1,awardsGroup:["教主带你打台球","酸奶公仔","King叔请你吃蛋糕","任选一位HR小姐姐吃饭","笔记本","谢谢参与","100个在线抓娃娃币","TouchPal充电宝"],award:"",lotteryId:0,time:1},created:function(){},mounted:function(){this.oPointer=document.querySelector(".pointer")},methods:{startGetReward:function(){var t=this;this.name=localStorage.getItem("username"),this.name&&(this.getLotteryTimes(),this.left_times>=1&&myLib.ajax({type:"get",dataType:"json",url:URL+"start_lottery?name="+this.name,success:function(e){if(2e3===e.code){var o=e.lottery_id;console.log(e.lottery_id),o<=1?t.lotteryId=0:o<=41?t.lotteryId=1:o<=43?t.lotteryId=2:o<=55?t.lotteryId=3:o<=95?t.lotteryId=4:o<=97?t.lotteryId=5:o<=99&&(t.lotteryId=7),t.offOn&&(t.addTransition=!1,t.oPointer.style.webkitTransform="rotate(0deg)",t.oPointer.style.MozTransform="rotate(0deg)",t.oPointer.style.msTransform="rotate(0deg)",t.oPointer.style.OTransform="rotate(0deg)",t.oPointer.style.transform="rotate(0deg)",Vue.nextTick(function(){t.offOn=!t.offOn,t.ratating()})),t.getLotteryTimes()}else alert("服务器错误")},error:function(){}}))},ratating:function(){var t=this;this.rdm=Math.floor(4*Math.random()+2),this.transformNum=360*this.rdm+45*this.lotteryId+Math.floor(43*Math.random()+1),setTimeout(function(){t.addTransition=!0,t.oPointer.style.transform="rotate("+t.transformNum+"deg)",t.oPointer.style.webkitTransform="rotate("+t.transformNum+"deg)",t.oPointer.style.MozTransform="rotate("+t.transformNum+"deg)",t.oPointer.style.msTransform="rotate("+t.transformNum+"deg)",t.oPointer.style.OTransform="rotate("+t.transformNum+"deg)",setTimeout(function(){t.offOn=!t.offOn,alert(t.awardsGroup[t.lotteryId])},4e3)})},commitName:function(){this.name&&(localStorage.setItem("username",this.name),console.log(localStorage.getItem("username")),this.getLotteryTimes())},getLotteryTimes:function(){var t=this;myLib.ajax({type:"get",dataType:"json",url:URL+"get_lottery_times?name="+this.name,success:function(e){2e3===e.code?(t.showMask=!1,t.showHeadTips=!0,t.left_times=e.left_times):alert("服务器错误")},error:function(){}})}}});